{% extends "tcms_base.html" %}

{% block subtitle %}{{ test_plan }}{% endblock %}

{% block custom_stylesheet %}
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/style/print.css" media="print" />
<style>
#tab_testcases{ padding-left:5px;}
#tab_testruns {padding-left:5px;}
.display_summary textarea{
	background:red;
}
</style>
{% endblock %}

{% block custom_javascript %}
<script type="text/javascript" src="{{ MEDIA_URL }}/js/lib/tablesort/fastinit.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}/js/lib/tablesort/tablesort.js"></script>
<script type="text/javascript" src='{{ MEDIA_URL }}/js/lib/tinymce/jscripts/tiny_mce/tiny_mce.js'></script>
<script type="text/javascript" src="{{ MEDIA_URL }}/js/testplan_actions.js"></script>
<script type="text/javascript" src='{{ MEDIA_URL }}/js/testcase_actions.js'></script>
<script type="text/javascript">
Nitrate.Utils.after_page_load(Nitrate.TestPlans.Edit.on_load);
</script>
{% endblock %}

{% block contents %}

<div id="content">
	<div class="sprites crumble">
		<a href="{% url tcms.core.views.index %}">Home</a>
		>> <a href="{% url tcms.testplans.views.all %}">Planning</a>
		>> <a href="{% url tcms.testplans.views.get test_plan.plan_id %}">{{ test_plan.plan_id }}: {{ test_plan }}</a>
		>> Edit
	</div>
	<input id="id_plan_id" type="hidden" name="plan_id" value="{{ test_plan.plan_id }}">
	<div class="control">
		<span class="right-bar">
			<a href="{% url tcms.testplans.views.text_history test_plan.plan_id %}" class="historylink">
				Edit History
			</a>
		</span>
	</div>
	<form action="{% url tcms.testplans.views.edit test_plan.plan_id %}" method="post" enctype="multipart/form-data">
		<div id="" class="Detailform border-1">
			<table class="editor" cellspacing="0">
				<tr>
					<td width="20%"><label class="lab strong" id="title_id">Plan Name</label></td>
					<td>
						<span class="name summary">{{ form.name }}</span>
						<span class="errors">{{ form.name.errors }}</span>
					</td>
				</tr>
				<tr>
					<td>
						<label clas"strong">{{ form.is_active.label }}</label>
					</td>
					<td>
						<span>{{ form.is_active }}</span>
					</td>
				</tr>
				<tr>
					<td><label class="lab">Author</label></td>
					<td>
						<span id="display_author"  class="name " > <a href="mailto:{{ test_plan.author.email }}">{{ test_plan.author.email }}</a></span>
					</td>
				</tr>
				<tr>
					<td>
						<label class="lab">Product</label>
					</td>
					<td>
						<span class="name summary">{{ form.product }}</span>
						<span class="errors">{{ form.product.errors }}</span>
					</td>
				</tr>
				<tr>
					<td>
						<label class="lab">Product Version</label>
					</td>
					<td>
						<span class="name summary">{{ form.default_product_version }}</span>
						<span class="errors">{{ form.default_product_version.errors }}</span>
					</td>
				</tr>
				<tr>
					<td>
						<label class="lab strong">Plan Type</label>
					</td>
					<td>
						<div class="name">{{ form.type }}</div>
						<div class="errors">{{ form.type.errors }}</div>
					</td>
				</tr>
                <tr>
                    <td>
                        <label class="lab">Parent ID</label>
                    </td>
                    <td>
                        <div class="name">{{ form.parent }}</div>
                        <div class="errors">{{ form.parent.errors }}</div>
                    </td>
                </tr>
				<tr>
					<td><label class="lab strong">Plan Document</label></td>
					<td>
						<div id="display_summary"  class="mec">
							{{ form.summary }}
						</div>
                        <div >{{ form.summary.errors }}</div>
                        <span>Or upload a plan document</span>
                        {{ form.upload_plan_text }}
                        <input type="submit" value="Upload" />
                        <span class="grey">Html, Plain text or ODT is acceptable.</span>
                        <div >{{ form.upload_plan_text.errors }}</div>
						{% comment %}
						<span>
							<input type="button" id="id_btn_upload_plan_summary"  value="Upload plan document..." />
							<font size="-3"><em>Html or plain text.</em></font>
						</span>
						{% endcomment %}
						<div class="errors">{{ form.summary.errors }}</div>
					</td>
				</tr>
				<tr>
					<td><label class="lab strong">Environment Group</label></td>
					<td>
						{{ form.env_group }}
						<span>
							<a class="system_help" href="#" title="" id="env_group_help_link">What is environment group?</a>
							<div id="env_group_help" class="system_info" style="display:none">
								<p>
									Environment Group represent group of environment properties and all values of these properties. <br/>
									TCMS uses environment variables to define the test hardware setup. The Environment Group is the top level container object, it contains one or more Properties, each having a range of values. Properties can belong to more than one group.
									<br/>
									Then when creating test run , you can set one value of each property under this environment group as environment of run testing.
									<br/>
									<a href="http://riddler.bne.redhat.com/TCMS-User_Guide/index.html#User_Guide-Environments">More Information</a>
									<a href="#" class="right-action" title="close the tip" id="env_group_help_close">Close</a>
								</p>

							</div>
						</span>
					</td>
				</tr>
				<tr>
					<td><label class="lab">Reference Link</label></td>
					<td>
						<div class="name summary">{{ form.extra_link }}</div>
						<div class="errors">{{ form.extra_link.errors }}</div>
					</td>
				</tr>
			</table>
			<div class="submit-row" id="control_box">
				<input type="submit" value="Save" />
				<input type="reset" value="Reset" />
				<input type="button" value="Back" onclick="window.location.href='{% url tcms.testplans.views.get test_plan.plan_id %}'" />
			</div>
		</div>
	</form>
</div>
{% endblock %}
